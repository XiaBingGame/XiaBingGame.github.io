<!DOCTYPE html>
<html>
<head>
<link rel="Stylesheet" type="text/css" href="../../../../style.css">
<title>OpenSceneGraphÈıÎ¬äÖÈ¾ÒıÇæ±à³ÌÖ¸ÄÏ7</title>
<meta http-equiv="Content-Type" content="text/html; charset=utf-8">
</head>
<body>

<div id="ç¬¬7ç«  åœºæ™¯å›¾å½¢çš„å·¥ä½œæœºåˆ¶ "><h1 id="ç¬¬7ç«  åœºæ™¯å›¾å½¢çš„å·¥ä½œæœºåˆ¶ ">ç¬¬7ç«  åœºæ™¯å›¾å½¢çš„å·¥ä½œæœºåˆ¶ </h1></div>
<ul>
<li>
ä½¿ç”¨ OSG çš„æ™ºèƒ½æŒ‡é’ˆçš„ä¸¤ä¸ªæ¡ä»¶:

<ul>
<li>
ç”¨æˆ·çš„ç±»æ´¾ç”Ÿè‡ª Referenced

<li>
ä½¿ç”¨æ™ºèƒ½æŒ‡é’ˆæ¨¡æ¿ osg::ref_ptr&lt;class T&gt;

</ul>
<li>
osg::NodeVisitor ç±»

<ul>
<li>
ä¸»è¦æœ‰ apply() å’Œ accept(), apply() å†³å®šäº†éå†çš„æ–¹å¼, å¦‚å¯ä»¥è·å¾—å„ä¸ªèŠ‚ç‚¹çš„å±æ€§, ä¹Ÿå¯ä»¥ä¿®æ”¹å„ä¸ªèŠ‚ç‚¹çš„å±æ€§, è¿™å®Œå…¨å–å†³äº apply() å‡½æ•°çš„å®ç°. å¯é‡å†™ apply() å‡½æ•°, è°ƒç”¨ accept() å‡½æ•°å¯ä»¥å…³è”éœ€è¦è®¿é—®çš„èŠ‚ç‚¹, é€šè¿‡é‡è½½ apply() å‡½æ•°æ¥å®ç°è‡ªå·±çš„åŠŸèƒ½

<li>
éå†çš„ç±»å‹æœ‰
<pre c++>
enum VisitorType
{
	NODE_VISITOR = 0, // èŠ‚ç‚¹è®¿é—®å™¨
	UPDATE_VISITOR, // æ›´æ–°è®¿é—®å™¨
	EVENT_VISITOR, // äº‹ä»¶è®¿é—®å™¨
	COLLECT_VISITOR, // é®æŒ¡èŠ‚ç‚¹è®¿é—®å™¨
	CULL_VISITOR // æ‹£é€‰è®¿é—®å™¨
};
</pre>

<li>
éå†çš„æ¨¡å¼åŒ…æ‹¬:
<pre c++>
enum TraversalMode
{
	TRAVERSE_NODE, // ä»…ä¼ é€’åˆ°å½“å‰èŠ‚ç‚¹
	TRAVERSE_PARENT, // ä¼ é€’ç»™å½“å‰èŠ‚ç‚¹åŠçˆ¶èŠ‚ç‚¹
	TRAVERSE_ALL_CHILDREN, // ä¼ é€’ç»™åœºæ™¯ä¸­æ‰€æœ‰çš„èŠ‚ç‚¹åŠå…¶å­èŠ‚ç‚¹
	TRAVERSE_ACTIVE_CHILDREN // ä¼ é€’ç»™åœºæ™¯ä¸­æ‰€æœ‰çš„æ´»åŠ¨èŠ‚ç‚¹åŠå…¶å­èŠ‚ç‚¹
};
</pre>

</ul>
<li>
åœ¨åº”ç”¨ç¨‹åºä¸­å®šä¹‰è‡ªå·±çš„è®¿é—®å™¨ä¸»è¦åŒ…æ‹¬ä»¥ä¸‹æ­¥éª¤:

<ul>
<li>
ç»§æ‰¿è‡ª osg::NodeVisitor ç±»å†™ä¸€ä¸ªæ–°ç±», é‡è½½å…¶ä¸­çš„ apply() æ–¹æ³•, æ·»åŠ è‡ªå·±çš„ä»£ç å®ç°ç›¸åº”çš„åŠŸèƒ½

<li>
åœ¨åº”ç”¨ç¨‹åºä¸­è°ƒç”¨ accept() æ–¹æ³•å…³è”ç›¸åº”çš„å°†è¯¶ç‚¹, å¯åŠ¨è®¿é—®å™¨éå†.

</ul>
<li>
åœ¨ OSG ä¸­, è®¾ç½®æœ‰ osg::Node, osg::Drawable, osg::Camera ç­‰çš„å›è°ƒ

<ul>
<li>
osg::Node å¯ä»¥åœ¨ OSG æ‰§è¡Œæ›´æ–°å’Œæ‹£é€‰éå†æ—¶è¿›è¡Œå›è°ƒ; è€Œ osg::Drawable å¯ä»¥åœ¨æ‹£é€‰å’Œç»˜åˆ¶éå†æ—¶è¿›è¡Œå›è°ƒ; osg::Camera å¯ä»¥åœ¨æ›´æ–°éå†æ—¶è¿›è¡Œå›è°ƒ.

<li>
osg::NodeCallback ç±»ä¸­, æœ‰ä¸ªå…³é”®æ“ä½œ operator(), å›è°ƒçš„æ“ä½œä»£ç éƒ½åœ¨å…¶ä¸­.

<li>
ä¸»è¦çš„å…³è”æ–¹æ³•:

<ul>
<li>
setUpdateCallback();

<li>
setCullCallback();

<li>
setDrawCallback();

<li>
setDrawCallback();

<li>
setEventCallback();

<li>
setReadFileCallback();

<li>
setWriteFileCallback();

</ul>
</ul>
<li>
osgViewer åº“æ”¯æŒå¤šçº¿ç¨‹æ¨¡å¼, æ¯ä¸€ä¸ªçº¿ç¨‹å‡ç‹¬ç«‹åœ°è¿è¡Œæ‹£é€‰åŠç»˜åˆ¶éå†. OSG æ²¡æœ‰ä¸ºçº¿ç¨‹çš„å®‰å…¨æ€§å¢è®¾å†…å­˜é”, è¦æ±‚åªåœ¨æ‹£é€‰åŠç»˜åˆ¶éå†çš„æ—¶åŸŸä¹‹å¤–ä¿®æ”¹åœºæ™¯å›¾å½¢. ä¸ºé¿å…æ‹£é€‰å’Œç»˜åˆ¶çš„å†²çª, åœ¨ frame() å¤–ä¿®æ”¹åœºæ™¯, å¦‚ä¸‹:
<pre c++>
while(!viewer-&gt;done())
{
	viewer-&gt;frame();
}
</pre>

<ul>
<li>
æ³¨æ„: osgViewer çš„å¤šçº¿ç¨‹æ¨¡å¼å…è®¸ç”¨æˆ·ç¨‹åºä¸»å¾ªç¯ä¸å¿…ç­‰åˆ°ç»˜åˆ¶éå†ç»“æŸå°±å¯ä»¥ç»§ç»­è¿è¡Œ. å³ Viewer::frame() æ–¹æ³•åœ¨ç»˜åˆ¶éå†ä»æœªç»“æŸæ—¶å°±å¯ä»¥è¿”å›. å³ä¸Šä¸€å¸§çš„ç»˜åˆ¶éå†å’Œä¸‹ä¸€å¸§çš„æ›´æ–°éå†å¯èƒ½åœ¨æ—¶é—´ä¸Šæœ‰é‡åˆ.

<li>
å¯é€šè¿‡ osg::Object::setDataVariance() æ–¹æ³•è§£å†³è¯¥é—®é¢˜.
<pre c++>
enum osg::Object::DataVariance
{
	DYNAMIC,
	STATIC,
	UNSPECIFIED
}
</pre>

<li>
OSG ç¡®ä¿ç»˜åˆ¶éå†æ‰€åœ¨çš„ DYNAMIC èŠ‚ç‚¹å’Œæ•°æ®å¤„ç†å®Œæˆåæ‰è¿”å›.

</ul>
</ul>

<div id="ç¬¬7ç«  åœºæ™¯å›¾å½¢çš„å·¥ä½œæœºåˆ¶ -ç¬¬8ç«  åœºæ™¯å›¾å½¢ç®¡ç†"><h2 id="ç¬¬8ç«  åœºæ™¯å›¾å½¢ç®¡ç†">ç¬¬8ç«  åœºæ™¯å›¾å½¢ç®¡ç†</h2></div>
<ul>
<li>
OSG ä¸­, åŒ…å« SimpleViewer, Viewer å’Œ CompositeView 3 å¤§è§†å£ç±»

<li>
osg::Camera ç±»

<ul>
<li>
void setViewMatrixAsLookAt(const osg::Vec3d&amp; eye, const osg::Vec3d&amp; center, const osg::Vec3d &amp;up)

<li>
void getViewMatrixAsLookAt(osg::Vec3d&amp; eye, osg::Vec3d&amp; center, osg::Vec3d &amp;up, double lookDDistance=1.0)

<li>
void getViewMatrixAsLookAt(osg::Vec3f&amp; eye, osg::Vec3f&amp; center, osg::Vec3f &amp;up, double lookDDistance=1.0)

</ul>
<li>
ä¸¤ç§é€è§†æŠ•å½±: 

<ul>
<li>
é€è§†è§†æ™¯ä½“

<ul>
<li>
void setProjectionMatrixAsFrustum(double left, double right, double bottom, double top, double zNear, double zFar)

<li>
bool getProjectionMatrixAsFrustum(double &amp;left, double &amp;right, double &amp;bottom, double &amp;top, double &amp;zNear, double &amp;zFar)

</ul>
<li>
å¯¹ç§°é€è§†è§†æ™¯ä½“

<ul>
<li>
void setProjectionMatrixAsPerspective(double fovy, double asperctRatio, double zNear, double zFar)

<li>
void getProjectionMatrixAsPerspective(double &amp;fovy, double &amp;asperctRatio, double &amp;zNear, double &amp;zFar)

</ul>
</ul>
<li>
æ­£äº¤æŠ•å½±: ç•¥è¿‡

<li>
è§†å£å˜æ¢å‡½æ•°: void setViewport(), getViewport()

<li>
è£å‰ªå¹³é¢ osg::Scissor, osg::ClipPlane

<ul>
<li>
osg::ClipPlane

<ul>
<li>
setClipPlane() --- è®¾ç½®è£å‰ªå¹³é¢

<li>
setClipPlaneNum(unsigned int num) / unsigned int getClipPlaneNum() const

</ul>
<li>
osg::Scissor ---è§†å£è£å‰ªå¹³é¢ä¸¾è¡Œ

<ul>
<li>
void setScissor()

</ul>
</ul>
<li>
æ¸…é™¤èƒŒæ™¯é¢œè‰²: void setClearColor, getClearColor

<li>
å„ç§ç¼“å­˜ä¿¡æ¯:

<ul>
<li>
void setColorMask(osg::ColorMask* colorMask)

<li>
void setColorMask(bool red, bool green, bool blue, bool alpha)

<li>
const ColorMask* getColorMask() const

<li>
ColorMask* getColorMask()

</ul>
<li>
osgViewer::Viewer ç»§æ‰¿è‡ª osgViewer::View ç±»å’Œ osg::Viewer::ViewerBase ç±»

<ul>
<li>
å“¦æ˜¯g::View ä¸»è¦ç”¨æ¥ç®¡ç†æ‰€æœ‰ç›¸æœºè§†å›¾. å®ƒåŒ…å«ä¸€ä¸ªä¸»ç›¸æœºå’ŒNä¸ªä»å±ç›¸æœº, å¦‚æœ View ä»…æœ‰ä¸€ä¸ªä¸»ç›¸æœº, åˆ™è¯¥ä¸»ç›¸æœºç”¨æ¥è´Ÿè´£æ§åˆ¶å’Œæ¸²æŸ“åœºæ™¯è§†å›¾, å¦‚æœåŒ…å«ä»å±ç›¸æœº, åˆ™ä¸»ç›¸æœºç”¨æ¥è´Ÿè´£æ§åˆ¶å’Œæ¸²æŸ“åœºæ™¯è§†å›¾. å¦‚æœåŒ…å«ä»å±ç›¸æœº, åˆ™ä¸»ç›¸æœºç”¨æ¥è´Ÿè´£æ§åˆ¶ç®¡ç†è§†å›¾, ä»å±ç›¸æœºç”¨äºæ¸²æŸ“åœºæ™¯.

<li>
osgViewer::View: å¯ä»¥æŒ‚æ¥äº‹ä»¶, å¤„ç†äº‹ä»¶, å¹¶è´Ÿè´£åˆ›å»ºç›¸æœºå’Œåˆ›å»ºå›¾å½¢ç¯å¢ƒçª—å£

<li>
osgViewer::ViewerBase: å…·æœ‰ç®¡ç†æ¸²æŸ“çš„çº¿ç¨‹, è´Ÿè´£è®¾ç½®çº¿ç¨‹æ¨¡å¼, å¯åŠ¨ç›¸å…³çº¿ç¨‹ç­‰åŠŸèƒ½.

<li>
osgGA::GUIActionAdapter: GUI åŠ¨ä½œé€‚é…å™¨, ç”¨æ¥å‘ç³»ç»Ÿå‘é€ä¸€äº›è¯·æ±‚, ä»¥å®ç°ä¸€äº›ç‰¹å®šçš„æ“ä½œ

</ul>
<li>
WindowingSystemInterface ç±»å¾—åˆ°ç³»ç»Ÿçª—å£æ¥å£

<li>
å¤šè§†å›¾çš„ç®¡ç†æ˜¯é€šè¿‡ osgViewer::CompositeViewer ç±»æ¥å®ç°çš„, è¯¥ç±»è´Ÿè´£å¤šä¸ªè§†å›¾çš„ç®¡ç†åŠåŒæ­¥å·¥ä½œ

<li>
osgGA åº“æ˜¯ OSG çš„ä¸€ä¸ªé™„åŠ çš„å·¥å…·åº“, å®ƒä¸ºç”¨æˆ·æä¾›å„ç§äº‹ä»¶å¤„ç†åŠæ“ä½œå¤„ç†.

<ul>
<li>
osgGA::GUIEvenetHandler ç±»ä¸»è¦æä¾›äº†çª—å£çš„ GUI äº‹ä»¶æ¥å£, å®ƒä½¿ç”¨ osgGA::GUIEventAdapter å®ä¾‹æ¥æ¥å—æ›´æ–°, ä½¿ç”¨ osgGA::GUIActionAdapter å®ä¾‹å‘ç³»ç»Ÿå‘å‡ºè¯·æ±‚

</ul>
<li>
osgGA è¿˜åŒ…æ‹¬å¾ˆå¤šæ“ä½œå™¨, ä¸»è¦åŒ…å«ä¸€ä¸ªåŸºç±» osgGA::MatrixManipulator å’Œå®ƒçš„ä¸€äº›æ´¾ç”Ÿç±», ä¸»è¦ç”¨äºçŸ©é˜µå˜æ¢å’Œäº‹ä»¶å¤„ç†

<li>
viewer é»˜è®¤ä½¿ç”¨ osgGA::TrackballManipulator æ“ä½œå™¨, å¯ä»¥ä¿®æ”¹ä¸ºå…¶ä»–çš„æ“ä½œå™¨
<pre c++>
	viewer-&gt;setCameraManipulator(new osgGA::TerrainManipulator());
</pre>

<li>
é¢„å®šä¹‰çš„äº‹ä»¶å¤„ç†å™¨:

<ul>
<li>
HelpHandler

<li>
StatsHandler

<li>
WindowSizeHandler

<li>
ThreadingHandler

<li>
RecordCameraPathHandler

<li>
LODScaleHandler

<li>
ScreenCaptureHandler

</ul>
<li>
ç¼–å†™è‡ªå·±çš„äº‹ä»¶å¤„ç†å™¨

<ul>
<li>
ç¼–å†™ä¸€ä¸ªæ–°ç±»ç»§æ‰¿è‡ª osgGA::GUIEventHandler ç±»

<li>
é‡è½½æˆå‘˜å‡½æ•° handle(), åœ¨ osgGA::GUIEventHandler ä¸­, è¯¥å‡½æ•°åŸå‹ä¸º
<pre>
	virtual bool handle(const GUIEventAdapter&amp;, GUIActionAdapter&amp;)
</pre>

<li>
å°†äº‹ä»¶å¤„ç†å™¨å‹å…¥å¤„ç†å™¨åˆ—è¡¨

</ul>
<li>
æŠ“å›¾
<pre c++>
image-&gt;readPixels(0, 0, width, height, GL_RGB, GL_UNSIGNED_BYTE);
</pre>

<ul>
<li>
æœ€å¥½åœ¨ osg:;Camera::DrawCallback ä¸­æ‰§è¡Œ readPixels

</ul>
<li>
ç¼–å†™è‡ªå®šä¹‰åœºæ™¯æ¼«æ¸¸æ“ä½œå™¨çš„ä¸»è¦æ­¥éª¤å¦‚ä¸‹:

<ul>
<li>
ç¼–å†™ä¸€ä¸ªç»§æ‰¿è‡ª osgGA::GUIEventHandlerç±»çš„æ–°ç±».

<li>
é‡è½½ handle() åŠç›¸å…³çŸ©é˜µå˜æ¢å‡½æ•°, æ³¨æ„åœ¨ handle() ä¸­æ·»åŠ åˆé€‚çš„äº‹ä»¶å¤„ç†å‡½æ•°, å¹¶æŒ‡å®šæ‰§è¡Œç›¸å…³çš„åŠ¨ä½œ.

<li>
è¿›è¡Œç¢°æ’æ£€æµ‹

<li>
å…³è”æ“ä½œå™¨åˆ°å½“å‰è§†å›¾åœºæ™¯ä¸­
<pre c++>
viewer-&gt;setCameraManipulator(camera);
</pre>

</ul>
<li>
osgGA::AnimationPathManipulator: è·¯å¾„åŠ¨ç”»

<li>
è·¯å¾„æ¼«æ¸¸ä¸»è¦æ­¥éª¤:

<ul>
<li>
åˆ›å»ºä¸€ä¸ª osgGA::AnimationPathManipulator

<li>
å…³è”éœ€è¦çš„è·¯å¾„

<li>
è®¾ç½®å½“å‰è§†å›¾åœºæ™¯æ“ä½œå™¨, å…³è”è¯¥åŠ¨ç”»è·¯å¾„æ“ä½œå™¨

</ul>
<li>
ç›¸äº¤è¿ç®— osgUtil::Intersector ç±», osgUtil::LineSegmentIntersector
<pre c++>
osgUtil::LineSegmentIntersector::Intersections intersections;
viewer-&gt;computeIntersections(x, y, intersections);
for(osgUtil::LineSegmentIntersector::Intersections::iterator hitr = intersections.begin(); hitr != intersections.end(); ++hitr)
{
	os &lt;&lt; "Mouse in World X:" &lt;&lt; hitr-&gt;getWorldIntersectPoint().x() &lt;&lt; " Y:" &lt;&lt; hitr-&gt;getWorldIntersectPoint().y() &lt;&lt; " Z: " &lt;&lt; hitr-&gt;getWorldIntersectPoint().z() &lt;&lt; std::endl;
}
</pre>

<li>
osgUtil::PolytopeIntersector: æ‹¾å–é™„è¿‘çš„å°é—­å¤šé¢ä½“åŒºåŸŸ

<li>
osgUtil::PlaneIntersector: å¹³é¢çš„ç›¸äº¤è¿ç®—

<li>
osgUtil::IntersectionVisitor : äº¤é›†è®¿é—®å™¨

</ul>

<div id="ç¬¬9ç«  OSG æ–‡å­—"><h1 id="ç¬¬9ç«  OSG æ–‡å­—">ç¬¬9ç«  OSG æ–‡å­—</h1></div>
<ul>
<li>
osgText ä¸»è¦åŒ…å«ç±»: FadeText, Font, font3D, VectorUInt, String, Text, Text3D, TextBase

<li>
osgText::Text ç±»æˆå‘˜å‡½æ•°

<ul>
<li>
void setColor

<li>
void setPosition

<li>
void setAxisAlignment

<li>
void setCharacterSizeMode

<li>
void setFontResolution

<li>
void setAlignment

<li>
void setLayout

<li>
void setDrawMode

<li>
void setBackdropType

<li>
void setColorGradientMode

</ul>
<li>
osgText::Font ç±», ç®¡ç†å­—ä½“

<ul>
<li>
readFontFile

</ul>
<li>
æ·»åŠ æ–‡å­—çš„ä¸»è¦æ­¥éª¤:

<ul>
<li>
åˆ›å»ºä¸€ä¸ª Font å­—ä½“å¯¹è±¡, å¹¶è¯»å–å­—ä½“

<li>
åˆ›å»ºä¸€ä¸ª osgText::Text å¯¹è±¡, è®¾ç½®æ–‡å­—çš„å±æ€§, åŒæ—¶å…³è”å­—ä½“

<li>
è°ƒç”¨ addDrawable() æ–¹æ³•å°† Text å®ä¾‹æ·»åŠ åˆ°ä¸€ä¸ª Geode å®ä¾‹

</ul>
<li>
osgText::Text3D ç±»

<ul>
<li>
æ·±åº¦ä¿¡æ¯å‡½æ•°: void setCharacterDepth(float)

</ul>
</ul>

<div id="ç¬¬10ç«  OSG åŠ¨ç”»ä¸å£°éŸ³ "><h1 id="ç¬¬10ç«  OSG åŠ¨ç”»ä¸å£°éŸ³ ">ç¬¬10ç«  OSG åŠ¨ç”»ä¸å£°éŸ³ </h1></div>
<ul>
<li>
osg::AnimationPath ç±»

<li>
è·¯å¾„åŠ¨ç”»é»˜è®¤æœ‰ä»¥ä¸‹3ç§åŠ¨ç”»æ¨¡å¼
<pre c++>
enum LoopMode
{
	SWING,
	LOOP,
	NO_LOOPING
}
</pre>

<ul>
<li>
setLoopMode(), getLoopMode()

<li>
å¾—åˆ°åŠ¨ç”»æŒç»­çš„æ—¶é—´å‡½æ•°: getFirstTime(), getLastTime()

</ul>
<li>
osg::AnimationPathCallback ç±»

<ul>
<li>
æ‰§è¡Œé€Ÿåº¦ void setTimeMultiplier(double multiplier), getTimeMultiplier()

<li>
reset(), setPause(bool pause), getPause()

</ul>
<li>
å¸§åŠ¨ç”»

<ul>
<li>
osg::Sequence

</ul>
<li>
éª¨éª¼åŠ¨ç”» osgCal

</ul>

</body>
</html>
